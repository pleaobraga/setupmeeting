<!DOCTYPE html>
<html ng-app="meeting">
<head>

  <title>Set Up a Meeting</title>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <base href="/" />

  <link rel="stylesheet" href="node_modules/angular-material/angular-material.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
  rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">
  <link rel="stylesheet" type="text/css" href="styles/app.css">


  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAPbTIwcRFCxFIALB4ayDB96lEA6wpJK-U&libraries=places"></script>


  <script src="node_modules/angular/angular.min.js"></script>
  <script src="node_modules/angular-route/angular-route.min.js"></script>
  <script src="node_modules/angular-aria/angular-aria.min.js"></script>
  <script src="node_modules/angular-animate/angular-animate.min.js"></script>
  <script src="node_modules/angular-messages/angular-messages.min.js"></script>
  <script src="node_modules/angular-sanitize/angular-sanitize.min.js"></script>
  <script src="node_modules/angular-material/angular-material.min.js"></script>

  <script>
  var meeting = angular.module("meeting",['ngRoute','ngAria','ngAnimate','ngMessages','ngSanitize','ngMaterial']);

  //Formate date dd/mm/yyyy
  meeting.config(function($mdDateLocaleProvider)
  {
    $mdDateLocaleProvider.formatDate = function(date)
    {
      //if date was setted
      if(!(angular.isUndefined(date) && date == null))
      {
        //get date proprieties
        var day = date.getDate();
        var monthIndex = date.getMonth() + 1;
        var year = date.getFullYear();

        //add 0 to day string
        if(day < 10)
        {
          day = '0' + day;
        }

        //add 0 to month string
        if(monthIndex < 10)
        {
          monthIndex = '0' + monthIndex;
        }

        //return correct date formate
        return day + '/' + monthIndex  + '/' + year;

      }
      //return if date was not setted
      else
      {
        return '';

      }
    };
});

  meeting.controller("meetingCtrl", ['$scope', function($scope){

    //select the iputs to add autocomplete by google api
    var input = document.getElementById('yourCity');
    var input2 = document.getElementById('theirCity')

    //insert into inputs google api autocomplete
    var autocomplete = new google.maps.places.Autocomplete(input, { types: ['(cities)']});
    var autocomplete = new google.maps.places.Autocomplete(input2, { types: ['(cities)']});

    $scope.cities = [];

  }]);

  </script>

</head>
<body ng-controller="meetingCtrl">

  <md-content>
    <md-whiteframe class="md-whiteframe-8dp" layout="column" layout-align="center start">

      <span class="md-display-2" layout="row" layout-align="start center">Marcador de Reunião Internacional</span>

      <md-divider></md-divider>

      <form name="meetingForm" layout="row" layout-align="space-between center" layout-fill>
        <md-input-container flex="25">
          <label>Data da reunião</label>
          <md-datepicker ng-model="dateMeeting" md-placeholder="Escolha a data"></md-datepicker>
        </md-input-container>

        <md-input-container  >
          <label>Sua cidade</label>
          <input id="yourCity" ng-model="cities[0].name" type="text" placeholder="Digite a localização"/>
        </md-input-container>

        <md-input-container>
          <label>Cidade da outra pessoa</label>
          <input id="theirCity" ng-model="cities[1].name" type="text"  placeholder="Digite a localização"  />
        </md-input-container>
      </form>

      <span class="md-display-1" layout="row" la>Horário da reunião</span>

      <div layout="column" class="meetingInfo">
        <div ng-repeat="city in cities" layout="row">
          <span style="color: #727272" class="md-body-2">{{city.name + " -"}} &nbsp</span>
          <span class="md-body-1">{{dateMeeting | date: 'dd/MM/yyyy'}}</span>
          <span class="md-body-2">{{city.hour}}</span>
        </div>

      </div>

    </md-whiteframe>

  </md-content>






</body>

</html>
